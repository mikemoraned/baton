<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Animations</title>
    <style type="text/scss">
      @import "constants";
      @import "definitions";
      @include define-grid(3, 3);
    </style>
  </head>
  <body>
    <div class="qrcode" id="parent">
      <!-- <div class="cell filled to-empty x0 y0 to-x2 to-y2">#</div>
      <div class="cell empty x1 y0 to-x1 to-y2">.</div>
      <div class="cell filled to-empty x2 y0 to-x0 to-y2">#</div>
      <div class="cell empty x0 y1 to-x2 to-y1">.</div>
      <div class="cell filled x1 y1 to-x1 to-y1">#</div>
      <div class="cell empty to-filled x2 y1 to-x0 to-y1">.</div>
      <div class="cell filled x0 y2 to-x2 to-y0">#</div>
      <div class="cell empty to-filled x1 y2 to-x1 to-y0">.</div>
      <div class="cell filled x2 y2 to-x0 to-y0">#</div> -->
    </div>
    <script type="module">
      import shuffle from "shuffle-array";

      const parent = document.getElementById("parent");
      function cell(fromFill, toFill, fromX, fromY, toX, toY) {
        const node = document.createElement("div");
        node.setAttribute(
          "class",
          `cell ${fromFill ? "filled" : "empty"} to-${
            toFill ? "filled" : "empty"
          } x${fromX} y${fromY} to-x${toX} to-y${toY}`
        );
        node.appendChild(document.createTextNode(fromFill ? "#" : "."));
        return node;
      }
      const width = 3;
      const height = 3;
      const to = [
        ["#", ".", "#"],
        [".", "#", "#"],
        ["#", ".", "#"],
      ];
      const reifiedFrom = [];
      const reifiedTo = [];
      for (let x = 0; x < width; x++) {
        for (let y = 0; y < height; y++) {
          reifiedFrom.push({ x, y });
          reifiedTo.push({ x, y, filled: to[y][x] === "#" });
        }
      }
      shuffle(reifiedFrom);
      for (let i = 0; i < reifiedFrom.length; i++) {
        parent.appendChild(
          cell(
            reifiedTo[i].filled,
            reifiedTo[i].filled,
            reifiedFrom[i].x,
            reifiedFrom[i].y,
            reifiedTo[i].x,
            reifiedTo[i].y
          )
        );
      }
    </script>
  </body>
</html>
